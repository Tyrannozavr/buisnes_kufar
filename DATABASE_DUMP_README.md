# Полный дамп базы данных

## Описание

Этот дамп содержит полную базу данных с:
- **134 города России** (включая города-миллионники и региональные центры)
- **85 регионов** всех федеральных округов
- **8 федеральных округов**
- **75 тестовых компаний** различных сфер деятельности
- **147 тестовых сервисов** с детальными характеристиками
- Все необходимые таблицы и структуры

## Файлы

- `database_dump_full.sql` - полный дамп базы данных (247KB)
- `database_dump_full.sql.gz` - сжатая версия дампа (33KB)

## Применение на сервере

### Вариант 1: Через Docker (рекомендуется)

```bash
# Остановить все сервисы
docker compose down

# Скопировать дамп в контейнер базы данных
docker cp database_dump_full.sql buisnes_kufar-db-1:/tmp/

# Восстановить базу данных
docker compose exec db psql -U postgres -d postgres -f /tmp/database_dump_full.sql

# Запустить все сервисы
docker compose up -d
```

### Вариант 2: Прямое подключение к PostgreSQL

```bash
# Если PostgreSQL установлен локально
psql -U postgres -d postgres -f database_dump_full.sql

# Или с сжатым файлом
gunzip -c database_dump_full.sql.gz | psql -U postgres -d postgres
```

### Вариант 3: Через pg_restore (если дамп в custom формате)

```bash
pg_restore -U postgres -d postgres database_dump_full.sql
```

## Структура данных

### Города и локации
- **Страны**: 1 (Российская Федерация)
- **Федеральные округа**: 8
- **Регионы**: 85
- **Города**: 134 (включая 15 городов-миллионников)

### Компании
- **Всего компаний**: 75
- **Сферы деятельности**: IT-услуги, Консалтинг, Образование, Медицинские услуги, Юридические услуги, Логистика, Ремонт, Дизайн, Маркетинг, Бухгалтерские услуги, Строительство, Красота и здоровье, Туризм, Финансовые услуги

### Сервисы
- **Всего сервисов**: 147
- **Категории**: 15 основных категорий услуг
- **Характеристики**: срок выполнения, гарантия, поддержка, опыт

## Проверка после восстановления

```sql
-- Проверить количество записей
SELECT 'countries' as table_name, COUNT(*) as count FROM countries
UNION ALL
SELECT 'federal_districts', COUNT(*) FROM federal_districts
UNION ALL
SELECT 'regions', COUNT(*) FROM regions
UNION ALL
SELECT 'cities', COUNT(*) FROM cities
UNION ALL
SELECT 'companies', COUNT(*) FROM companies
UNION ALL
SELECT 'products', COUNT(*) FROM products WHERE type = 'SERVICE';
```

## Особенности

1. **Города-миллионники**: Москва, Санкт-Петербург, Новосибирск, Екатеринбург, Казань, Нижний Новгород, Челябинск, Самара, Омск, Ростов-на-Дону, Уфа, Красноярск, Воронеж, Пермь, Волгоград

2. **Региональные центры**: Все административные центры регионов отмечены как региональные центры

3. **Компании**: Каждая компания имеет полную информацию включая ИНН, ОГРН, адреса, контакты

4. **Сервисы**: Каждый сервис имеет детальные характеристики, цены и привязан к соответствующей компании

## Безопасность

- Все пароли и чувствительные данные заменены на тестовые значения
- ИНН, ОГРН и другие реквизиты сгенерированы случайно
- Контактные данные являются вымышленными

## Поддержка

При возникновении проблем с восстановлением дампа проверьте:
1. Версию PostgreSQL (рекомендуется 13+)
2. Права доступа к базе данных
3. Доступное место на диске
4. Логи PostgreSQL для диагностики ошибок