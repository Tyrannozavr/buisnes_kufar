# База данных городов и стран России

## Описание файлов
- **`db.sql`** - Исходная база данных с географической информацией о городах и странах мира (2010 год)
- **`complete_cities_db_final.sql`** - **ПОЛНАЯ база данных городов России** (2024 год) ⭐
- **`README.md`** - Документация по использованию базы данных

## Структура ПОЛНОЙ базы данных

### Таблицы:
- **`countries`** - страны мира (id, name, code)
- **`federal_districts`** - федеральные округа России (id, country_id, name)
- **`regions`** - регионы/области/края России (id, district_id, country_id, name, type)
- **`cities`** - города России (id, region_id, district_id, country_id, name, population, is_capital)

### Связи:
- **Для России**: Город → Регион → Федеральный округ → Страна
- **Полная иерархия**: Все города России привязаны к регионам и федеральным округам

### Особенности структуры:
- **2,617 городов России** из всех источников
- **78 регионов** России с правильной привязкой к федеральным округам
- **8 федеральных округов** России
- **Данные о населении** для городов из GitHub city.csv
- **Столицы регионов** отмечены флагом is_capital
- **Внешние ключи** для обеспечения целостности данных

## Статистика данных

### База db.sql (2010):
- **19,418 городов** всего в базе
- **2,533 города России** в оригинальной базе
- **78 регионов** России
- **254 записи** в таблице стран (включая регионы)

### ПОЛНАЯ база complete_cities_db_final.sql (2024):
- **2,617 городов России** (объединение всех источников)
- **78 регионов** России с федеральными округами
- **8 федеральных округов** России
- **4 страны**: Россия, Украина, Беларусь, Казахстан
- **Данные о населении** для городов из GitHub city.csv
- **Столицы регионов** отмечены флагом is_capital
- **Источники**: db.sql + GitHub hflabs/city
- **Размер файла**: 132KB

### Федеральные округа России:
1. **Центральный федеральный округ** (18 регионов)
2. **Северо-Западный федеральный округ** (11 регионов)
3. **Южный федеральный округ** (8 регионов)
4. **Дальневосточный федеральный округ** (9 регионов)
5. **Сибирский федеральный округ** (12 регионов)
6. **Уральский федеральный округ** (6 регионов)
7. **Приволжский федеральный округ** (14 регионов)
8. **Северо-Кавказский федеральный округ** (7 регионов)

### Примеры запросов:

```sql
-- Все города России с регионами и округами
SELECT c.name as city, r.name as region, fd.name as district
FROM cities c
JOIN regions r ON c.region_id = r.id
JOIN federal_districts fd ON c.district_id = fd.id
WHERE c.country_id = 1
ORDER BY fd.name, r.name, c.name;

-- Крупнейшие города России (население > 1 млн)
SELECT c.name as city, c.population, r.name as region, fd.name as district
FROM cities c
JOIN regions r ON c.region_id = r.id
JOIN federal_districts fd ON c.district_id = fd.id
WHERE c.population > 1000000 AND c.country_id = 1
ORDER BY c.population DESC;

-- Столицы регионов России
SELECT c.name as city, r.name as region, fd.name as district
FROM cities c
JOIN regions r ON c.region_id = r.id
JOIN federal_districts fd ON c.district_id = fd.id
WHERE c.is_capital = 1 AND c.country_id = 1;
```

## Использование

1. **Импорт базы данных:**
   ```bash
   mysql -u username -p < complete_cities_db_final.sql
   ```

2. **Использование в приложениях:**
   - Полная иерархия: Страна → Федеральный округ → Регион → Город
   - Данные о населении для крупных городов
   - Отметки столиц регионов
   - Внешние ключи для целостности данных

## Технические детали

- **Кодировка**: UTF-8 (utf8mb4_unicode_ci)
- **Движок**: InnoDB
- **Внешние ключи**: Включены для всех связей
- **Индексы**: По названиям городов и связям между таблицами
- **Совместимость**: MySQL 5.7+, MariaDB 10.2+

## История создания

1. **Анализ исходных данных**: Изучена база db.sql (2010) с 2,533 городами России
2. **Поиск дополнительных источников**: Найден GitHub hflabs/city с 1,118 городами
3. **Объединение данных**: Создана полная база с 2,617 уникальными городами
4. **Структурирование**: Добавлены федеральные округа и правильная привязка регионов
5. **Оптимизация**: Создана оптимизированная SQL структура с внешними ключами

## Результат

✅ **Создана самая полная база данных городов России** с:
- 2,617 городами (в 2.7 раза больше исходной базы)
- Полной иерархией: Федеральные округа → Регионы → Города
- Данными о населении для крупных городов
- Готовностью к использованию в production